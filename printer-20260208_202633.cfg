
[homing_override]
axes: xyz
set_position_z: 0

gcode:
    G90
    G1 z20 f5000

  {% set home_all = 'X' not in params and 'Y' not in params and 'Z' not in params %}

  {% if home_all or 'X' in params %}
   # set_position_x: 5
   # g91
   # g1 x-5 f300
   # G90
    _HOME_X
  {% endif %}
  
  {% if home_all or 'Y' in params %}
   # set_position_y: 5
   # g91
   # g1 y-5 f300
   # G90
    _HOME_Y
  {% endif %}
  
  {% if home_all or 'Z' in params %}
    G90
    G1 Z20
    G1 x175 y197 F12000 #probe middle
    G28 Z
    G1 Z5
  {% endif %}


[printer]
kinematics: corexy
max_velocity: 700  
max_accel: 15000                 #Max 4000
max_z_velocity: 20   
max_z_accel: 300 #300
square_corner_velocity: 5.0

[mcu]
canbus_uuid: 3a9f8167decd
# python3 flashtool.py -i can0 -f ~/klipper/out/klipper.bin -u 3a9f8167decd
# python3 flashtool.py -f ~/klipper/out/klipper.bin -d /dev/serial/by-id/usb-CanBoot_stm32f446xx_3F002F000251323438323636-if00


[mcu EBBCan]
canbus_uuid: acaffce1fb68

[adxl345]
cs_pin: EBBCan: PB12
spi_software_sclk_pin: EBBCan: PB10
spi_software_mosi_pin: EBBCan: PB11
spi_software_miso_pin: EBBCan: PB2
axes_map: x,y,z

[resonance_tester]
probe_points: 175, 175, 175
accel_chip: adxl345

[input_shaper]
shaper_freq_x: 57.8
shaper_type_x: mzv
shaper_freq_y: 37.6
shaper_type_y: mzv
damping_ratio_x: 0.040 # damping ratio for the X axis
damping_ratio_y: 0.059 # damping ratio for the Y axis

[gcode_arcs]
resolution: 0.1

#[z_thermal_adjust]
#temp_coeff: 0


[output_pin Daylight]
pin: PB15
pwm: True
cycle_time: 0.0100
value: 1.0
shutdown_value: 1


[filament_switch_sensor runout_sensor]
switch_pin: ^PA1
pause_on_runout: False
runout_gcode:
    SET_IDLE_TIMEOUT TIMEOUT=10800
    RESPOND MSG="Runout sensor reported NO FILAMENT"
    PAUSE # [pause_resume] is required in printer.cfg
  #M117 Filament switch runout
insert_gcode:
  #M117 Filament switch inserted
    RESPOND MSG="Filament inserted"

[filament_motion_sensor block_sensor]
switch_pin: ^PA2
detection_length: 50
extruder: extruder
pause_on_runout: False
runout_gcode:
    SET_IDLE_TIMEOUT TIMEOUT=10800
    RESPOND MSG="BLOCK sensor reported BLOCK FILAMENT"
    PAUSE # [pause_resume] is required in printer.cfg
  #M117 Filament encoder runout
#insert_gcode:
 # M117 Filament encoder inserted




[skew_correction] 
[shaketune]















[force_move]
[exclude_object]
[include steppers.cfg]
[include heaters.cfg]
[include fans.cfg]
[include macros.cfg]
[include mesh.cfg]
[include temp_sensors.cfg]
[include mainsail.cfg]
[include sensorless.cfg]
[include stealthburner_led.cfg]
[include /home/pi/printer_data/config/KAMP/KAMP_Settings.cfg]
[include test_speed.cfg]
#[include timelapse.cfg]
[include poweroff.cfg]
[include print_start.cfg]
[include K-ShakeTune/*.cfg]
[include z_thermal_offset.cfg]

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	0.046250, 0.040263, 0.037097, 0.043208, 0.047989, 0.051290, 0.049356, 0.042729, 0.043682, 0.047590, 0.042840, 0.035878, 0.037310, 0.040850, 0.037575, 0.034540, 0.037380, 0.039836, 0.037528, 0.033997, 0.024312, 0.017107, 0.024394, 0.040595, 0.050685
#*# 	0.038359, 0.029163, 0.026181, 0.033322, 0.038735, 0.040904, 0.043817, 0.037720, 0.038787, 0.043504, 0.040142, 0.033970, 0.034088, 0.037013, 0.031821, 0.028288, 0.030836, 0.034856, 0.030025, 0.024514, 0.014005, 0.007149, 0.016424, 0.034787, 0.045021
#*# 	0.030845, 0.015634, 0.017367, 0.022693, 0.031732, 0.031837, 0.036385, 0.031220, 0.032842, 0.038062, 0.036072, 0.029258, 0.030786, 0.033885, 0.029898, 0.025045, 0.025014, 0.027974, 0.024509, 0.015713, 0.005135, -0.001286, 0.008042, 0.024519, 0.034812
#*# 	0.025851, 0.015288, 0.011834, 0.017400, 0.025757, 0.030047, 0.030280, 0.025580, 0.026291, 0.033749, 0.031318, 0.023241, 0.024423, 0.028134, 0.026140, 0.022734, 0.020375, 0.020801, 0.019015, 0.011863, 0.002145, -0.005563, 0.003300, 0.019828, 0.026013
#*# 	0.027609, 0.011394, 0.012110, 0.017355, 0.025965, 0.028475, 0.029073, 0.023010, 0.025399, 0.032580, 0.028265, 0.018496, 0.019641, 0.022441, 0.024801, 0.021237, 0.018336, 0.018457, 0.016478, 0.013332, 0.005033, -0.002824, 0.005627, 0.017326, 0.024261
#*# 	0.026104, 0.013323, 0.007986, 0.014079, 0.021035, 0.025494, 0.025420, 0.018830, 0.019010, 0.027190, 0.022708, 0.013332, 0.013813, 0.015415, 0.017291, 0.015210, 0.014427, 0.018389, 0.019235, 0.016058, 0.007533, 0.000194, 0.010040, 0.021114, 0.023138
#*# 	0.029042, 0.012778, 0.009497, 0.013847, 0.021847, 0.020162, 0.021637, 0.015124, 0.015452, 0.023706, 0.019868, 0.012941, 0.012215, 0.013578, 0.013615, 0.011395, 0.010503, 0.017602, 0.020224, 0.017858, 0.009343, 0.005783, 0.014726, 0.021707, 0.024497
#*# 	0.033676, 0.020315, 0.012167, 0.013816, 0.019510, 0.022289, 0.018252, 0.009980, 0.011841, 0.019970, 0.016306, 0.010885, 0.010775, 0.012656, 0.010616, 0.008112, 0.008200, 0.015283, 0.018505, 0.016251, 0.012041, 0.010766, 0.020423, 0.028195, 0.027445
#*# 	0.030029, 0.013306, 0.010404, 0.011282, 0.015084, 0.015497, 0.013165, 0.006099, 0.006339, 0.013872, 0.010142, 0.005830, 0.007376, 0.010090, 0.007412, 0.004392, 0.005225, 0.010242, 0.014706, 0.012098, 0.011099, 0.010636, 0.020647, 0.029040, 0.029478
#*# 	0.022917, 0.012512, 0.003514, 0.004881, 0.009902, 0.009738, 0.006479, -0.001151, 0.000919, 0.007855, 0.006191, 0.001093, 0.002655, 0.005982, 0.005321, 0.002769, 0.004535, 0.008085, 0.013351, 0.012612, 0.008868, 0.007006, 0.021513, 0.031377, 0.031658
#*# 	0.019347, 0.006425, 0.000191, 0.000752, 0.004236, 0.006051, 0.002186, -0.002326, -0.000912, 0.005884, 0.004807, -0.000764, -0.001278, 0.004058, 0.004660, 0.002947, 0.003770, 0.007236, 0.012752, 0.013352, 0.010389, 0.007963, 0.019878, 0.030289, 0.032881
#*# 	0.019489, 0.008627, 0.000993, -0.002434, 0.002293, 0.006003, 0.002989, -0.002654, -0.000021, 0.007694, 0.007147, 0.000931, -0.001574, 0.004025, 0.005697, 0.005513, 0.006667, 0.012068, 0.017515, 0.019270, 0.015720, 0.012585, 0.023873, 0.035493, 0.037644
#*# 	0.016914, 0.001930, -0.002249, -0.001699, 0.002895, 0.006666, 0.003264, -0.003925, -0.000854, 0.010006, 0.009372, 0.002556, 0.000000, 0.003031, 0.003755, 0.004874, 0.009053, 0.013643, 0.016492, 0.018399, 0.019232, 0.013711, 0.023196, 0.033049, 0.038069
#*# 	0.017627, 0.006759, 0.001419, -0.003201, 0.002805, 0.006342, 0.003286, -0.006133, -0.000818, 0.009360, 0.011664, 0.005672, 0.004910, 0.005624, 0.004968, 0.005564, 0.010678, 0.016050, 0.018251, 0.020917, 0.020700, 0.016281, 0.026030, 0.038584, 0.040774
#*# 	0.017589, 0.004511, -0.002704, -0.003916, 0.000197, 0.004034, 0.001475, -0.005059, -0.001318, 0.006842, 0.007152, 0.003813, 0.004140, 0.005109, 0.005673, 0.005775, 0.010904, 0.018771, 0.022990, 0.018720, 0.021006, 0.020424, 0.030719, 0.040110, 0.044385
#*# 	0.014613, 0.002127, -0.002643, -0.008606, -0.002138, -0.001196, -0.004027, -0.013016, -0.007243, -0.000656, -0.002013, -0.005890, -0.001378, 0.001058, 0.003785, 0.004902, 0.007491, 0.016370, 0.021566, 0.016603, 0.014875, 0.017176, 0.030394, 0.041041, 0.043192
#*# 	0.012750, -0.001539, -0.007161, -0.009380, -0.005606, -0.007081, -0.009525, -0.015118, -0.011610, -0.002884, -0.003917, -0.009216, -0.005359, -0.001738, 0.001791, 0.002723, 0.005402, 0.012224, 0.015328, 0.011114, 0.012305, 0.013997, 0.023667, 0.033628, 0.040947
#*# 	0.013635, 0.000614, -0.004867, -0.012402, -0.008570, -0.011263, -0.014336, -0.020305, -0.014772, -0.005047, -0.002199, -0.010423, -0.008187, -0.005584, -0.001000, 0.001008, 0.003809, 0.007797, 0.008956, 0.005251, 0.005553, 0.006622, 0.017332, 0.031111, 0.037841
#*# 	0.013155, -0.003835, -0.010310, -0.013522, -0.012419, -0.015470, -0.018926, -0.021173, -0.019551, -0.010692, -0.007138, -0.011389, -0.012458, -0.010013, -0.006842, -0.004795, -0.000794, 0.001263, 0.001944, -0.002858, 0.000753, -0.000371, 0.010358, 0.020089, 0.033564
#*# 	0.014492, 0.002469, -0.002049, -0.011553, -0.008744, -0.011122, -0.010851, -0.019274, -0.014790, -0.009698, -0.008529, -0.013756, -0.009925, -0.006450, -0.003608, -0.001876, 0.000521, 0.001698, 0.002488, -0.000125, -0.003215, -0.004870, 0.006894, 0.021075, 0.032035
#*# 	0.018555, 0.006444, 0.000320, -0.002953, -0.002529, -0.003862, -0.005009, -0.006700, -0.005010, -0.000922, -0.000315, -0.002158, 0.000980, 0.003844, 0.006136, 0.006120, 0.009326, 0.010153, 0.009978, 0.005460, 0.001935, -0.004560, 0.005791, 0.015467, 0.034340
#*# 	0.026939, 0.016716, 0.010334, 0.002716, 0.007172, 0.007447, 0.010988, 0.002867, 0.006366, 0.011894, 0.011991, 0.008081, 0.011834, 0.016038, 0.016993, 0.016039, 0.018880, 0.019579, 0.019185, 0.013543, 0.006025, 0.000081, 0.009225, 0.025236, 0.040017
#*# 	0.037150, 0.025720, 0.017689, 0.017069, 0.018957, 0.021741, 0.021744, 0.020579, 0.016675, 0.022956, 0.023540, 0.020126, 0.022124, 0.025006, 0.025517, 0.022909, 0.027299, 0.028444, 0.028030, 0.022420, 0.013223, 0.008518, 0.016790, 0.033494, 0.047230
#*# 	0.055803, 0.045952, 0.041100, 0.036274, 0.038513, 0.041071, 0.045892, 0.035582, 0.036637, 0.040958, 0.041894, 0.034784, 0.036299, 0.040518, 0.037764, 0.036381, 0.039190, 0.040768, 0.040086, 0.034838, 0.024600, 0.022069, 0.034326, 0.049794, 0.058985
#*# 	0.076623, 0.066723, 0.060489, 0.058857, 0.058714, 0.059960, 0.062862, 0.063920, 0.060270, 0.062818, 0.060237, 0.056517, 0.053936, 0.058180, 0.058983, 0.057120, 0.057488, 0.057462, 0.056034, 0.048978, 0.040065, 0.039754, 0.052375, 0.067641, 0.078013
#*# x_count = 25
#*# y_count = 25
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 30.0
#*# max_x = 320.0
#*# min_y = 30.0
#*# max_y = 320.0
#*#
#*# [beacon model default]
#*# model_coef = 1.4808349618335799,
#*# 	  1.8150079984469918,
#*# 	  0.7571731369964566,
#*# 	  0.23380891415205704,
#*# 	  0.3331185716976056,
#*# 	  0.7617192601160314,
#*# 	  -0.1865858244831164,
#*# 	  -0.8862254655308051,
#*# 	  0.21513847790051185,
#*# 	  0.4779720555116235
#*# model_domain = 3.1946374205922597e-07,3.3364806212667e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 28.874692
#*# model_offset = 0.11000
#*#
#*# [beacon model textured]
#*# model_coef = 1.5197722718138305,
#*# 	1.856037299893034,
#*# 	0.7134149089264613,
#*# 	0.22695693299485403,
#*# 	0.44797980130079285,
#*# 	0.6778614963414286,
#*# 	-0.30785739294765774,
#*# 	-0.7298017060328998,
#*# 	0.22715090282991962,
#*# 	0.3715899613958613
#*# model_domain = 3.228357064494186e-07,3.3409861738278517e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 54.617612
#*# model_offset = 0.00000
#*#
#*# [skew_correction CaliFlower]
#*# xy_skew = -0.003325113961596694
#*# xz_skew = 0.0
#*# yz_skew = 0.0
